{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/sale.service\";\nimport * as i2 from \"src/app/services/medicine.service\";\nimport * as i3 from \"src/app/services/client.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/router\";\nfunction SalesComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const medicine_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", medicine_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(medicine_r5.name);\n  }\n}\nfunction SalesComponent_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const client_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", client_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(client_r6.name);\n  }\n}\nfunction SalesComponent_li_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 16)(2, \"span\", 17);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function SalesComponent_li_26_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const sale_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.delete(sale_r7));\n    });\n    i0.ɵɵtext(6, \"x\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const sale_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"\", sale_r7.id, \"/details\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sale_r7.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", sale_r7.date_sale, \" \", sale_r7.medicament == null ? null : sale_r7.medicament.name, \" \");\n  }\n}\nexport class SalesComponent {\n  constructor(saleService, medicineService, clientService) {\n    this.saleService = saleService;\n    this.medicineService = medicineService;\n    this.clientService = clientService;\n    this.selectedMedicine = undefined;\n    this.selectedClient = undefined;\n    this.sales = [];\n    this.medicines = [];\n    this.clients = [];\n  }\n  ngOnInit() {\n    this.getSales();\n  }\n  getSales() {\n    this.saleService.getSales().subscribe(sales => {\n      console.log(sales);\n      this.sales = sales.map(sale => {\n        this.medicineService.getMedicine(sale.id_medicament).subscribe(medicine => sale.medicament = medicine);\n        return sale;\n      });\n      return sales;\n    });\n  }\n  getMedicines() {\n    this.medicineService.getMedicines().subscribe(medicines => {\n      this.medicines = medicines;\n      this.selectedMedicine = medicines[0];\n    });\n  }\n  getClients() {\n    this.clientService.getclients().subscribe(clients => {\n      this.clients = clients;\n      this.selectedClient = clients[0];\n    });\n  }\n  add(dateSale, qquantity, idC, idM) {\n    dateSale = dateSale.trim();\n    let date_sale = new Date(dateSale);\n    qquantity = qquantity.trim();\n    idC = idC.trim();\n    idM = idM.trim();\n    let quantity = Number(qquantity);\n    let id_client = Number(idC);\n    let id_medicament = Number(idM);\n    if (!date_sale || !quantity || !id_client || !id_medicament) {\n      return;\n    }\n    this.saleService.addSale({\n      date_sale,\n      quantity,\n      id_client,\n      id_medicament\n    }).subscribe(sale => {\n      this.getSales();\n    });\n  }\n  delete(sale) {\n    this.sales = this.sales.filter(h => h !== sale);\n    this.saleService.deleteSale(sale.id).subscribe();\n  }\n  static #_ = this.ɵfac = function SalesComponent_Factory(t) {\n    return new (t || SalesComponent)(i0.ɵɵdirectiveInject(i1.SaleService), i0.ɵɵdirectiveInject(i2.MedicineService), i0.ɵɵdirectiveInject(i3.ClientService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SalesComponent,\n    selectors: [[\"app-sales\"]],\n    decls: 27,\n    vars: 5,\n    consts: [[\"for\", \"new-date-of-sale\"], [\"type\", \"date\", \"id\", \"new-date-of-sale\", \"placeholder\", \"YYYY-MM-DD\"], [\"dateOfSale\", \"\"], [\"for\", \"new-quantity\"], [\"id\", \"new-quantity\"], [\"quantity\", \"\"], [1, \"form-group\"], [\"for\", \"new-id-medicament\"], [\"id\", \"new-id-medicament\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"new-id-client\"], [\"id\", \"new-id-client\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"add-button\", 3, \"click\"], [1, \"sales\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngValue\"], [3, \"routerLink\"], [1, \"badge\"], [\"type\", \"button\", \"title\", \"delete sale\", 1, \"delete\", 3, \"click\"]],\n    template: function SalesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r10 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"My sales\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\")(3, \"label\", 0);\n        i0.ɵɵtext(4, \"Date of sale: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"input\", 1, 2)(7, \"br\");\n        i0.ɵɵelementStart(8, \"label\", 3);\n        i0.ɵɵtext(9, \"Quantity: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 4, 5)(12, \"br\");\n        i0.ɵɵelementStart(13, \"div\", 6)(14, \"label\", 7);\n        i0.ɵɵtext(15, \"ID Medicine \");\n        i0.ɵɵelementStart(16, \"select\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function SalesComponent_Template_select_ngModelChange_16_listener($event) {\n          return ctx.selectedMedicine = $event;\n        });\n        i0.ɵɵtemplate(17, SalesComponent_option_17_Template, 2, 2, \"option\", 9);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 6)(19, \"label\", 10);\n        i0.ɵɵtext(20, \"ID Client \");\n        i0.ɵɵelementStart(21, \"select\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function SalesComponent_Template_select_ngModelChange_21_listener($event) {\n          return ctx.selectedClient = $event;\n        });\n        i0.ɵɵtemplate(22, SalesComponent_option_22_Template, 2, 2, \"option\", 9);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function SalesComponent_Template_button_click_23_listener() {\n          i0.ɵɵrestoreView(_r10);\n          const _r0 = i0.ɵɵreference(6);\n          const _r1 = i0.ɵɵreference(11);\n          ctx.add(_r0.value, _r1.value);\n          _r0.value = \"\";\n          return i0.ɵɵresetView(_r1.value = \"\");\n        });\n        i0.ɵɵtext(24, \" Add sale \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"ul\", 13);\n        i0.ɵɵtemplate(26, SalesComponent_li_26_Template, 7, 4, \"li\", 14);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedMedicine);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.medicines);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedClient);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.clients);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sales);\n      }\n    },\n    dependencies: [i4.NgForOf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.RequiredValidator, i5.NgModel, i6.RouterLink],\n    styles: [\".sales[_ngcontent-%COMP%]{\\n    margin: 0 0 2em 0;\\n    list-style-type: none;\\n    padding: 0;\\n    width: 20em;\\n  }\\n  \\n  label[_ngcontent-%COMP%] {\\n    color: #435960;\\n    font-weight: bold;\\n  }\\n  input[_ngcontent-%COMP%] {\\n    font-size: 1em;\\n    padding: .5rem;\\n  }\\n  \\n  .sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n    position: relative;\\n    cursor: pointer;\\n  }\\n  \\n  .sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover {\\n    left: .1em;\\n  }\\n  \\n  .sales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n    color: #333;\\n    text-decoration: none;\\n    background-color: #EEE;\\n    margin: .5em;\\n    padding: .3em 0;\\n    height: 1.6em;\\n    border-radius: 4px;\\n    display: block;\\n    width: 100%;\\n  }\\n  \\n  .sales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n    color: #2c3a41;\\n    background-color: #e6e6e6;\\n  }\\n  \\n  .sales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active {\\n    background-color: #525252;\\n    color: #fafafa;\\n  }\\n  \\n  .sales[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\\n    display: inline-block;\\n    font-size: small;\\n    color: black;\\n    padding: 0.8em 0.7em 0 0.7em;\\n    background-color: #fdd3d3;\\n    line-height: 1em;\\n    position: relative;\\n    left: -1px;\\n    top: -4px;\\n    height: 1.8em;\\n    min-width: 16px;\\n    text-align: right;\\n    margin-right: .8em;\\n    border-radius: 4px 0 0 4px;\\n  }\\n  \\n  .add-button[_ngcontent-%COMP%] {\\n   padding: .5rem 1.5rem;\\n   font-size: 1rem;\\n   margin-bottom: 2rem;\\n  }\\n  \\n  .add-button[_ngcontent-%COMP%]:hover {\\n    color: white;\\n    background-color: #e394da;\\n  }\\n  \\n  button.delete[_ngcontent-%COMP%] {\\n    position: absolute;\\n    left: 290px;\\n    top: 5px;\\n    background-color: white;\\n    color:  #525252;\\n    font-size: 1.1rem;\\n    margin: 0;\\n    padding: 1px 10px 3px 10px;\\n  }\\n  \\n  button.delete[_ngcontent-%COMP%]:hover {\\n    background-color: #525252;\\n    color: white;\\n  }\\n/*# sourceURL=webpack://./src/app/components/sales/sales.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zYWxlcy9zYWxlcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQztBQUMzQztJQUNJLGlCQUFpQjtJQUNqQixxQkFBcUI7SUFDckIsVUFBVTtJQUNWLFdBQVc7RUFDYjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxpQkFBaUI7RUFDbkI7RUFDQTtJQUNFLGNBQWM7SUFDZCxjQUFjO0VBQ2hCOztFQUVBO0lBQ0Usa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxVQUFVO0VBQ1o7O0VBRUE7SUFDRSxXQUFXO0lBQ1gscUJBQXFCO0lBQ3JCLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osZUFBZTtJQUNmLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsY0FBYztJQUNkLFdBQVc7RUFDYjs7RUFFQTtJQUNFLGNBQWM7SUFDZCx5QkFBeUI7RUFDM0I7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsY0FBYztFQUNoQjs7RUFFQTtJQUNFLHFCQUFxQjtJQUNyQixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLDRCQUE0QjtJQUM1Qix5QkFBeUI7SUFDekIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsU0FBUztJQUNULGFBQWE7SUFDYixlQUFlO0lBQ2YsaUJBQWlCO0lBQ2pCLGtCQUFrQjtJQUNsQiwwQkFBMEI7RUFDNUI7O0VBRUE7R0FDQyxxQkFBcUI7R0FDckIsZUFBZTtHQUNmLG1CQUFtQjtFQUNwQjs7RUFFQTtJQUNFLFlBQVk7SUFDWix5QkFBeUI7RUFDM0I7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsV0FBVztJQUNYLFFBQVE7SUFDUix1QkFBdUI7SUFDdkIsZUFBZTtJQUNmLGlCQUFpQjtJQUNqQixTQUFTO0lBQ1QsMEJBQTBCO0VBQzVCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7RUFDZDs7O0VBR0E7Ozs7R0FJQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIHN1cHBsaWVzQ29tcG9uZW50J3MgcHJpdmF0ZSBDU1Mgc3R5bGVzICovXG4uc2FsZXN7XG4gICAgbWFyZ2luOiAwIDAgMmVtIDA7XG4gICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgd2lkdGg6IDIwZW07XG4gIH1cbiAgXG4gIGxhYmVsIHtcbiAgICBjb2xvcjogIzQzNTk2MDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgfVxuICBpbnB1dCB7XG4gICAgZm9udC1zaXplOiAxZW07XG4gICAgcGFkZGluZzogLjVyZW07XG4gIH1cbiAgXG4gIC5zYWxlcyBsaSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuICBcbiAgLnNhbGVzIGxpOmhvdmVyIHtcbiAgICBsZWZ0OiAuMWVtO1xuICB9XG4gIFxuICAuc2FsZXMgYSB7XG4gICAgY29sb3I6ICMzMzM7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNFRUU7XG4gICAgbWFyZ2luOiAuNWVtO1xuICAgIHBhZGRpbmc6IC4zZW0gMDtcbiAgICBoZWlnaHQ6IDEuNmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuICBcbiAgLnNhbGVzIGE6aG92ZXIge1xuICAgIGNvbG9yOiAjMmMzYTQxO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlNmU2ZTY7XG4gIH1cbiAgXG4gIC5zYWxlcyBhOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcbiAgICBjb2xvcjogI2ZhZmFmYTtcbiAgfVxuICBcbiAgLnNhbGVzIC5iYWRnZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIGZvbnQtc2l6ZTogc21hbGw7XG4gICAgY29sb3I6IGJsYWNrO1xuICAgIHBhZGRpbmc6IDAuOGVtIDAuN2VtIDAgMC43ZW07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZkZDNkMztcbiAgICBsaW5lLWhlaWdodDogMWVtO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBsZWZ0OiAtMXB4O1xuICAgIHRvcDogLTRweDtcbiAgICBoZWlnaHQ6IDEuOGVtO1xuICAgIG1pbi13aWR0aDogMTZweDtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBtYXJnaW4tcmlnaHQ6IC44ZW07XG4gICAgYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7XG4gIH1cbiAgXG4gIC5hZGQtYnV0dG9uIHtcbiAgIHBhZGRpbmc6IC41cmVtIDEuNXJlbTtcbiAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgIG1hcmdpbi1ib3R0b206IDJyZW07XG4gIH1cbiAgXG4gIC5hZGQtYnV0dG9uOmhvdmVyIHtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2UzOTRkYTtcbiAgfVxuICBcbiAgYnV0dG9uLmRlbGV0ZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDI5MHB4O1xuICAgIHRvcDogNXB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGNvbG9yOiAgIzUyNTI1MjtcbiAgICBmb250LXNpemU6IDEuMXJlbTtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMXB4IDEwcHggM3B4IDEwcHg7XG4gIH1cbiAgXG4gIGJ1dHRvbi5kZWxldGU6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XG4gICAgY29sb3I6IHdoaXRlO1xuICB9XG4gIFxuICBcbiAgLypcbiAgQ29weXJpZ2h0IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXRcbiAgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAgKi8iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","SalesComponent","constructor","saleService","medicineService","clientService","undefined","ngOnInit","getSales","subscribe","sales","console","log","map","sale","getMedicine","id_medicament","medicine","medicament","getMedicines","medicines","selectedMedicine","getClients","getclients","clients","selectedClient","add","dateSale","qquantity","idC","idM","trim","date_sale","Date","quantity","Number","id_client","addSale","delete","filter","h","deleteSale","id","selectors","decls","vars","consts","template","ctx","_r0"],"sourceRoot":"","sources":["/home/luiza/Documents/proiectDBnou/Angular/src/app/components/sales/sales.component.html","/home/luiza/Documents/proiectDBnou/Angular/src/app/components/sales/sales.component.ts"],"sourcesContent":["<h2>My sales</h2>\n\n<div>\n  <label for=\"new-date-of-sale\">Date of sale: </label>\n  <input type=\"date\" id=\"new-date-of-sale\" placeholder=\"YYYY-MM-DD\" #dateOfSale />\n  <br/>\n  <label for=\"new-quantity\">Quantity: </label>\n  <input id=\"new-quantity\" #quantity />\n  <br/>\n\n  <!--\n  <label for=\"new-id-client\">ID Client: </label>\n  <input id=\"new-id-client\" #idC />\n  <br/>\n  <label for=\"new-id-medicament\">ID Medicine: </label>\n  <input id=\"new-id-medicament\" #idM />\n  <br/>\n  -->\n\n  <div class=\"form-group\">\n    <label for=\"new-id-medicament\">ID Medicine\n    <select id=\"new-id-medicament\" class=\"form-control\" [(ngModel)]=\"selectedMedicine\" required>\n      <option *ngFor=\"let medicine of medicines\" [ngValue]=\"medicine\">{{medicine.name}}</option>\n    </select>\n    </label>\n</div>\n\n<div class=\"form-group\">\n  <label for=\"new-id-client\">ID Client\n  <select id=\"new-id-client\" class=\"form-control\" [(ngModel)]=\"selectedClient\" required>\n    <option *ngFor=\"let client of clients\" [ngValue]=\"client\">{{client.name}}</option>\n  </select>\n  </label>\n</div>\n\n  <!-- (click) passes input value to add() and then clears the input -->\n  <button type=\"button\" class=\"add-button\" (click)=\"add(dateOfSale.value, quantity.value); dateOfSale.value=''; quantity.value=''\">\n    Add sale\n  </button>\n</div>\n\n<ul class=\"sales\">\n  <li *ngFor=\"let sale of sales\">\n    <a routerLink=\"{{sale.id}}/details\">\n      <span class=\"badge\">{{sale.id}}</span> {{sale.date_sale}} {{sale.medicament?.name}} \n    </a>\n    <button type=\"button\" class=\"delete\" title=\"delete sale\"\n      (click)=\"delete(sale)\">x</button>\n  </li>\n</ul>\n\n\n<!-- \nCopyright Google LLC. All Rights Reserved.\nUse of this source code is governed by an MIT-style license that\ncan be found in the LICENSE file at https://angular.io/license\n-->","import { Component, OnInit } from '@angular/core';\n\nimport { Sale } from '../../model/sale';\nimport { SaleService } from '../../services/sale.service';\nimport { MedicineService } from 'src/app/services/medicine.service';\nimport { ClientService } from 'src/app/services/client.service';\nimport { Client } from 'src/app/model/client';\nimport { Medicine } from 'src/app/model/medicine';\n\n@Component({\n  selector: 'app-sales',\n  templateUrl: './sales.component.html',\n  styleUrls: ['./sales.component.css']\n})\nexport class SalesComponent implements OnInit {\n\n  selectedMedicine?: Medicine=undefined;\n  selectedClient?: Client=undefined;\n  sales: Sale[] = [];\n  medicines: Medicine[]=[];\n  clients: Client[]=[];\n\n  constructor(\n    private saleService: SaleService, \n    private medicineService: MedicineService,\n    private clientService: ClientService,\n\n    ) \n  { }\n\n  ngOnInit(): void {\n    this.getSales();\n  }\n\n  getSales(): void {\n    this.saleService.getSales()\n    .subscribe(sales => {\n      console.log(sales);\n      this.sales = sales.map(sale => {\n        this.medicineService.getMedicine(sale.id_medicament)\n        .subscribe(medicine => sale.medicament = medicine);\n\n        return sale;\n      }\n\n      );\n\n      return sales;\n    });\n  }\n\n\n  getMedicines(): void {\n    this.medicineService.getMedicines()\n    .subscribe(medicines => {\n      this.medicines = medicines\n      this.selectedMedicine=medicines[0];\n     \n    }); \n  }\n\n  getClients(): void {\n    this.clientService.getclients()\n    .subscribe(clients => {\n      this.clients = clients\n      this.selectedClient=clients[0];\n     \n    }); \n  }\n\n  add(dateSale: string, qquantity: string, idC: string, idM: string): void {\n    dateSale = dateSale.trim();\n    let date_sale = new Date(dateSale);\n    qquantity = qquantity.trim();\n    idC = idC.trim();\n    idM = idM.trim();\n    let quantity=Number(qquantity);\n    let id_client=Number(idC);\n    let id_medicament=Number(idM);\n\n    if (!date_sale || !quantity || !id_client || !id_medicament) { return; }\n    this.saleService.addSale({ date_sale, quantity, id_client, id_medicament } as Sale)\n      .subscribe(sale => {\n        this.getSales();\n      });\n  }\n\n  delete(sale: Sale): void {\n    this.sales = this.sales.filter(h => h !== sale);\n    this.saleService.deleteSale(sale.id).subscribe();\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}