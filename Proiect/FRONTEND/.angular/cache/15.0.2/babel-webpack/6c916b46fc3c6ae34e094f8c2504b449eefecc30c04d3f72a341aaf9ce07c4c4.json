{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet SuppliesComponent = class SuppliesComponent {\n  constructor(supplyService, medicineService) {\n    this.supplyService = supplyService;\n    this.medicineService = medicineService;\n    this.supplies = [];\n    this.medicines = [];\n  }\n  ngOnInit() {\n    this.getSupplies();\n    this.getMedicines();\n  }\n  getSupplies() {\n    this.supplyService.getSupplies().subscribe(supplies => {\n      this.supplies = supplies.map(supply => {\n        this.medicineService.getMedicine(supply.id_medicament).subscribe(medicine => supply.medicament = medicine);\n        return supply;\n      });\n      return supplies;\n    });\n  }\n  getMedicines() {\n    this.medicineService.getMedicines().subscribe(medicines => this.medicines = medicines);\n  }\n  add(dateSupply, qquantity, idM) {\n    dateSupply = dateSupply.trim();\n    let date_supply = new Date(dateSupply);\n    qquantity = qquantity.trim();\n    idM = idM.trim();\n    let quantity = Number(qquantity);\n    let id_medicament = Number(idM);\n    if (!date_supply || !quantity || !id_medicament) {\n      return;\n    }\n    this.supplyService.addSupply({\n      date_supply,\n      quantity,\n      id_medicament\n    }).subscribe(supply => {\n      this.getSupplies();\n    });\n  }\n  delete(supply) {\n    this.supplies = this.supplies.filter(h => h !== supply);\n    this.supplyService.deleteSupply(supply.id).subscribe();\n  }\n};\nSuppliesComponent = __decorate([Component({\n  selector: 'app-supplies',\n  templateUrl: './supplies.component.html',\n  styleUrls: ['./supplies.component.css']\n})], SuppliesComponent);\nexport { SuppliesComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAY1C,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAI5BC,YACUC,aAA4B,EAC5BC,eAAgC;IADhC,kBAAa,GAAbD,aAAa;IACb,oBAAe,GAAfC,eAAe;IALzB,aAAQ,GAAa,EAAE;IACvB,cAAS,GAAa,EAAE;EAKpB;EAKJC,QAAQ;IACN,IAAI,CAACC,WAAW,EAAE;IAClB,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAD,WAAW;IACT,IAAI,CAACH,aAAa,CAACG,WAAW,EAAE,CAC/BE,SAAS,CAACC,QAAQ,IAAG;MACpB,IAAI,CAACA,QAAQ,GAAGA,QAAQ,CAACC,GAAG,CAACC,MAAM,IAAG;QACpC,IAAI,CAACP,eAAe,CAACQ,WAAW,CAACD,MAAM,CAACE,aAAa,CAAC,CACrDL,SAAS,CAACM,QAAQ,IAAIH,MAAM,CAACI,UAAU,GAAGD,QAAQ,CAAC;QAEpD,OAAOH,MAAM;MACf,CAAC,CAEA;MAED,OAAOF,QAAQ;IACjB,CAAC,CAAC;EACJ;EAEAF,YAAY;IACV,IAAI,CAACH,eAAe,CAACG,YAAY,EAAE,CAClCC,SAAS,CAACQ,SAAS,IAAI,IAAI,CAACA,SAAS,GAAGA,SAAS,CAAC;EACrD;EAEAC,GAAG,CAACC,UAAkB,EAAEC,SAAiB,EAAEC,GAAW;IACpDF,UAAU,GAAGA,UAAU,CAACG,IAAI,EAAE;IAC9B,IAAIC,WAAW,GAAG,IAAIC,IAAI,CAACL,UAAU,CAAC;IACtCC,SAAS,GAAGA,SAAS,CAACE,IAAI,EAAE;IAC5BD,GAAG,GAAGA,GAAG,CAACC,IAAI,EAAE;IAChB,IAAIG,QAAQ,GAACC,MAAM,CAACN,SAAS,CAAC;IAC9B,IAAIN,aAAa,GAACY,MAAM,CAACL,GAAG,CAAC;IAE7B,IAAI,CAACE,WAAW,IAAI,CAACE,QAAQ,IAAI,CAACX,aAAa,EAAE;MAAE;;IACnD,IAAI,CAACV,aAAa,CAACuB,SAAS,CAAC;MAAEJ,WAAW;MAAEE,QAAQ;MAAEX;IAAa,CAAY,CAAC,CAC7EL,SAAS,CAACG,MAAM,IAAG;MAClB,IAAI,CAACL,WAAW,EAAE;IACpB,CAAC,CAAC;EACN;EAEAqB,MAAM,CAAChB,MAAc;IACnB,IAAI,CAACF,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACmB,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKlB,MAAM,CAAC;IACvD,IAAI,CAACR,aAAa,CAAC2B,YAAY,CAACnB,MAAM,CAACoB,EAAE,CAAC,CAACvB,SAAS,EAAE;EACxD;CAED;AA1DYP,iBAAiB,eAL7BD,SAAS,CAAC;EACTgC,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,GACWjC,iBAAiB,CA0D7B;SA1DYA,iBAAiB","names":["Component","SuppliesComponent","constructor","supplyService","medicineService","ngOnInit","getSupplies","getMedicines","subscribe","supplies","map","supply","getMedicine","id_medicament","medicine","medicament","medicines","add","dateSupply","qquantity","idM","trim","date_supply","Date","quantity","Number","addSupply","delete","filter","h","deleteSupply","id","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/luiza/Documents/proiectDBnou/Angular/src/app/components/supplies/supplies.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Medicine } from 'src/app/model/medicine';\nimport { MedicineService } from 'src/app/services/medicine.service';\n\nimport { Supply } from '../../model/supply';\nimport { SupplyService } from '../../services/supply.service';\n\n@Component({\n  selector: 'app-supplies',\n  templateUrl: './supplies.component.html',\n  styleUrls: ['./supplies.component.css']\n})\nexport class SuppliesComponent implements OnInit {\n  supplies: Supply[] = [];\n  medicines: Medicine[]=[];\n\n  constructor(\n    private supplyService: SupplyService, \n    private medicineService: MedicineService\n  ) { }\n\n\n\n\n  ngOnInit(): void {\n    this.getSupplies();\n    this.getMedicines();\n  }\n\n  getSupplies(): void {\n    this.supplyService.getSupplies()\n    .subscribe(supplies => {\n      this.supplies = supplies.map(supply => {\n        this.medicineService.getMedicine(supply.id_medicament)\n        .subscribe(medicine => supply.medicament = medicine);\n\n        return supply;\n      }\n\n      );\n\n      return supplies;\n    });\n  }\n\n  getMedicines(): void {\n    this.medicineService.getMedicines()\n    .subscribe(medicines => this.medicines = medicines);\n  }\n\n  add(dateSupply: string, qquantity: string, idM: string): void {\n    dateSupply = dateSupply.trim();\n    let date_supply = new Date(dateSupply);\n    qquantity = qquantity.trim();\n    idM = idM.trim();\n    let quantity=Number(qquantity);\n    let id_medicament=Number(idM);\n\n    if (!date_supply || !quantity || !id_medicament) { return; }\n    this.supplyService.addSupply({ date_supply, quantity, id_medicament } as Supply)\n      .subscribe(supply => {\n        this.getSupplies();\n      });\n  }\n\n  delete(supply: Supply): void {\n    this.supplies = this.supplies.filter(h => h !== supply);\n    this.supplyService.deleteSupply(supply.id).subscribe();\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}